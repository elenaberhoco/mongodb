
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4. Les index &#8212; MongoDB</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/04_index';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Les requêtes d’agrégation" href="05_agreg.html" />
    <link rel="prev" title="3. Attributs de type date" href="03_dates.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="00_intro.html">
  
  
  
  
  
  
    <p class="title logo__title">MongoDB</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="00_intro.html">
                    MongoDB : Notes de cours
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Chapitres</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_find.html">1. Premières requêtes en MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_listes.html">2. Attributs de type liste</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_dates.html">3. Attributs de type date</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">4. Les index</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_agreg.html">5. Les requêtes d’agrégation</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_modif.html">6. Les requêtes de modification</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="07_scripts.html">7. Effectuer des requêtes depuis des programmes Python ou R</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="07_scripts_py.html">7.1. Requêtes depuis Python : <code class="docutils literal notranslate"><span class="pre">pymongo</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="07_scripts_R.html">7.2. Requêtes depuis R : <code class="docutils literal notranslate"><span class="pre">mongolite</span></code></a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/elenaberhoco/mongodb-trash" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/elenaberhoco/mongodb-trash/issues/new?title=Issue%20on%20page%20%2Fcontent/04_index.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/content/04_index.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Les index</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-quoi-servent-ils">4.1. À quoi servent-ils ?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quand-les-utiliser">4.2. Quand les utiliser ?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#syntaxe-adaptee">4.3. Syntaxe adaptée</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#index-composes">4.4. Index composés</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#requetes-et-index-textuels">4.5. Requêtes et Index textuels</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#index-geo-spatiaux">4.6. Index géo-spatiaux</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="les-index">
<h1><span class="section-number">4. </span>Les index<a class="headerlink" href="#les-index" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Auteurs/trices : Adrien VIGUE, Etienne BARON, Camille MONOT</p></li>
</ul>
<p>Ce chapitre traite de :</p>
<ul class="simple">
<li><p>Index + requêtes textuelles + requêtes géographiques</p></li>
</ul>
<section id="a-quoi-servent-ils">
<h2><span class="section-number">4.1. </span>À quoi servent-ils ?<a class="headerlink" href="#a-quoi-servent-ils" title="Link to this heading">#</a></h2>
<p>Les index prennent en charge l’exécution efficace des requêtes dans MongoDB. Sans index, MongoDB doit effectuer une analyse de collection , c’est-à-dire analyser chaque document d’une collection, pour sélectionner les documents qui correspondent à l’instruction de requête. Si un index approprié existe pour une requête, MongoDB peut utiliser l’index pour limiter le nombre de documents qu’il doit inspecter. Les index de MongoDB sont similaires aux index d’autres systèmes de base de données. MongoDB définit les index au niveau de la collection et prend en charge les index sur n’importe quel champ ou sous-champ des documents dans une collection MongoDB.</p>
<p>En bref, les index sont un moyen de trouver rapidement et efficacement du contenu dans une base de données.</p>
</section>
<section id="quand-les-utiliser">
<h2><span class="section-number">4.2. </span>Quand les utiliser ?<a class="headerlink" href="#quand-les-utiliser" title="Link to this heading">#</a></h2>
<p>On met en place des index à chaque fois qu’on s’attend à avoir beaucoup de requêtes sur une clé (resp. un ensemble de clés).
Par exemple, on souhaite récupérer les notes d’un étudiant à l’aide de son numéro étudiant. Il faudra alors mettre un index sur la clé “numéro étudiant” afin de réaliser des requêtes efficaces pour retrouver toutes les informations de l’étudiant en fonction de son numéro.</p>
<div class="tip admonition">
<p class="admonition-title">⚠️ Attention</p>
<p>On ne peut pas toujours utiliser des index. En effet, les index rendent la mise à jour de la base fastidieuse : à chaque fois que
vous rajoutez de nouvelles données, vous devez redéfinir vos index. Il est donc nécessaire d’utiliser avec parcimonie des index sur une base
où vous vous attendez à devoir faire des mises à jour régulières.</p>
</div>
</section>
<section id="syntaxe-adaptee">
<h2><span class="section-number">4.3. </span>Syntaxe adaptée<a class="headerlink" href="#syntaxe-adaptee" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Création d’un index</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">nomDeLaCollection</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span><span class="s2">&quot;cle&quot;</span><span class="o">:</span><span class="mf">1</span><span class="p">})</span>
</pre></div>
</div>
<p>On crée ici un index dans la collection ‘collec’ de la base de données courante ‘db’. On donne ensuite le nom du champs sur lequel on va ensuite créer la clé. Le “:1” signifie que l’index va trier les données dans l’ordre croissant.</p>
<p><em>Exemple :</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">use</span> <span class="n">food</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>  <span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="n">use</span> <span class="n">food</span>
        <span class="o">^</span>
<span class="ne">SyntaxError</span>: invalid syntax
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">createIndex</span><span class="p">({</span><span class="s2">&quot;borough&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<p>Ici on crée un index “quartier” dans la collection NYfood de la base food. Le quartier étant une information importante du restaurant, il est judicieux de créer un index pour toutes les requêtes ultérieures.</p>
<div class="admonition-a-noter admonition">
<p class="admonition-title">✍ À noter</p>
<p>Si on avait mis une valeur négative à la place du 1, les données auraient été triées dans l’ordre décroissant.
Le tri n’a cependant pas d’importance sur l’efficacité de la requête.</p>
</div>
<ul class="simple">
<li><p>Récupération d’index</p></li>
</ul>
<p>Lorsque l’on prend en main une nouvelle base mongoDB, il est judicieux de se renseigner sur les index déjà créés, afin de construire les requêtes les plus optimisées possible. Pour cela, on utilise getIndexes :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">collec</span><span class="p">.</span><span class="nx">getIndexes</span><span class="p">()</span>
</pre></div>
</div>
<p>La syntaxe est très simple et limpide, et donc si l’on applique cette dernière à notre exemple :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">getIndexes</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Opérateurs bénéficiant de l’index</p></li>
</ul>
<p>Construire une requête mongoDB utilisant des index ne diffèrent pas d’une requête n’en utilisant pas, toutefois, certains opérateurs logiques bénéficient tout particulièrement de la présence d’un ou plusieurs index. Il est donc pertinent de construire des index si vous pensez utiliser ces opérateurs.</p>
<p><em>Exemple 1 : Opérateur égal (:, <code class="docutils literal notranslate"><span class="pre">$eq</span></code>)</em></p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s2">&quot;cuisine&quot;</span><span class="p">:</span> <span class="s2">&quot;Chinese&quot;</span><span class="p">,</span> <span class="s2">&quot;borough&quot;</span><span class="p">:</span> <span class="s2">&quot;Brooklyn&quot;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<p>On récupère les restaurants proposant de la cuisine chinoise dans le quartier de Brooklyn.</p>
<p><em>Exemple 2 : Opérateur infériorité/supériorité (<code class="docutils literal notranslate"><span class="pre">$lt</span></code>, <code class="docutils literal notranslate"><span class="pre">$lte</span></code>, <code class="docutils literal notranslate"><span class="pre">$gt</span></code>, <code class="docutils literal notranslate"><span class="pre">$gte</span></code>)</em></p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span><span class="err">$</span><span class="n">gte</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="err">$</span><span class="n">lt</span><span class="p">:</span> <span class="s2">&quot;D&quot;</span><span class="p">}})</span>
</pre></div>
</div>
</div>
</div>
<p>On récupère les restaurant dont le nom est situé entre “C” et “D” dans l’ordre lexicographique.</p>
<p><em>Exemple 3 : différence d’exécution avec et sans index</em></p>
<p>Reprenons la requête vue à l’exemple 1, mais cette fois affichons son temps d’exécution :</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s2">&quot;cuisine&quot;</span><span class="p">:</span> <span class="s2">&quot;Chinese&quot;</span><span class="p">,</span> <span class="s2">&quot;borough&quot;</span><span class="p">:</span> <span class="s2">&quot;Brooklyn&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="s2">&quot;executionStats&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Rajoutons maintenant l’index “cuisine” (l’index quartier ayant déjà été créé plus haut) :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">createIndex</span><span class="p">({</span><span class="s2">&quot;cuisine&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<p>On peut maintenant relancer la requête et observer la différence :</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s2">&quot;cuisine&quot;</span><span class="p">:</span> <span class="s2">&quot;Chinese&quot;</span><span class="p">,</span> <span class="s2">&quot;borough&quot;</span><span class="p">:</span> <span class="s2">&quot;Brooklyn&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="s2">&quot;executionStats&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="index-composes">
<h2><span class="section-number">4.4. </span>Index composés<a class="headerlink" href="#index-composes" title="Link to this heading">#</a></h2>
<p>Il est également possible de créer des index non pas sur un mais sur plusieurs champs de la base de données, on appelle alors un tel index un “index composé”. L’intérêt d’une telle pratique est de lier des champs entre eux et d’optimiser grandement des requêtes portant sur ces derniers. Si l’on s’attend à effectuer de telles requêtes, alors créer un index composé devient judicieux.</p>
<ul class="simple">
<li><p>Création d’un index composé</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">nomDeLaCollection</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span><span class="s2">&quot;cle1&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;cle2&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">}</span>
</pre></div>
</div>
<div class="tip admonition">
<p class="admonition-title">⚠️ Attention</p>
<p>L’ordre dans lequel vous déclarez vos champs à une importance capitale dans le résultat renvoyé par la requête.
Par exemple, l’index composé suivant : db.nomDeLaCollection.createIndex({“cle2”: 1, “cle1”: 1}, ne correspond pas du tout
à l’index vu juste au-dessus.
Certaines requêtes pourront ainsi être accélérées par l’un ou l’autre des index mais pas forcément par les deux.</p>
</div>
<ul class="simple">
<li><p>Exemple de requête utilisant un index composé</p></li>
</ul>
<p>Nous avons déjà vu un tel exemple, en effet si nous revenons un peu plus haut, nous avons déjà donné une requête de ce type :</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s2">&quot;cuisine&quot;</span><span class="p">:</span> <span class="s2">&quot;Chinese&quot;</span><span class="p">,</span> <span class="s2">&quot;borough&quot;</span><span class="p">:</span> <span class="s2">&quot;Brooklyn&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="s2">&quot;executionStats&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Ici, on pourrait profiter  d’un index composé sur les attributs “cuisine” et “borough” :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">createIndex</span><span class="p">({</span><span class="s2">&quot;cuisine&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;borough&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<p>Répétons notre requête pour voir l’intérêt de notre nouvel index :</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s2">&quot;cuisine&quot;</span><span class="p">:</span> <span class="s2">&quot;Chinese&quot;</span><span class="p">,</span> <span class="s2">&quot;borough&quot;</span><span class="p">:</span> <span class="s2">&quot;Brooklyn&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="s2">&quot;executionStats&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="requetes-et-index-textuels">
<h2><span class="section-number">4.5. </span>Requêtes et Index textuels<a class="headerlink" href="#requetes-et-index-textuels" title="Link to this heading">#</a></h2>
<p>Lorsque l’on veut interroger notre base de données sur un champ de type “chaîne de caractères”, deux méthodes s’offrent à nous : on peut utiliser soit des requêtes régulières, soit un index textuel qui a été créé sur-le-champ. L’avantage de la première méthode est une très grande précision, et on l’utilisera donc lorsque l’on recherchera du texte très précis, tandis que la seconde méthode utilise la puissance de l’index pour effectuer une recherche de type “moteur de recherche”, renvoyant des résultats proches de ce qui a été demandé. Ici, comme on s’intéresse uniquement au index, nous ne développerons que la seconde méthode.</p>
<ul class="simple">
<li><p>Création d’un index textuel</p></li>
</ul>
<p>Il existe deux manières de créer un index textuel, sur un attribut précis ou alors sur l’ensemble des attributs :</p>
<p><em>Pour un attribut précis, ici “cle” :</em></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">coll</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span><span class="s2">&quot;cle&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">})</span>
</pre></div>
</div>
<p><em>Pour tous les attributs :</em></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">nomDeLaCollection</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span><span class="s2">&quot;$**&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">})</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Requêtes avancées utilisant un index textuel</p></li>
</ul>
<p>Pour effectuer un requête de type “moteur de recherche”, on utilise la forme suivante :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">nomDeLaCollection</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">$text</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$search</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ma requête&quot;</span><span class="p">}})</span>
</pre></div>
</div>
<p>On remarque plusieurs choses : tout d’abord, il n’est pas nécessaire de préciser le ou les champ sur lequel on veut effectuer la recherche. Ce type de requête n’était possible que sur les champs avec un index textuel, c’est sur ces derniers que le langage va requêter (c’est le sens du <code class="docutils literal notranslate"><span class="pre">&quot;$text&quot;</span></code>). Ensuite, on remarque la présence de <code class="docutils literal notranslate"><span class="pre">&quot;$search&quot;</span></code>, nécessaire pour ce type de requête.</p>
<p>Par défaut, lorsque l’on effectue une requête contenant plusieurs termes, un OU logique est effectué : les résultats retournés sont ceux qui contiennent au moins l’un des termes. On peut également effectuer une requête impliquant une expression exacte, qui sera encadrée de guillemets échappés par un caractère “” :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">nomDeLaCollection</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">$text</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$search</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;\&quot;ma requête\&quot;&quot;</span><span class="p">}})</span>
</pre></div>
</div>
<p>De plus, il est possible d’exclure des termes des résultats en utilisant “-”, dans ce cas, un ET logique est effectué. Par exemple, dans la requête suivante, on souhaite les documents contenant “ma requête” et ne contenant pas “exemple” en même temps :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">nomDeLaCollection</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">$text</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$search</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ma requête -exemple&quot;</span><span class="p">}})</span>
</pre></div>
</div>
<p>Enfin, on peut classer les documents par pertinence par rapport à notre requête, en utilisant le score td-idf (plus d’informations disponibles <a class="reference external" href="https://fr.wikipedia.org/wiki/TF-IDF">ici</a> :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">nomDeLaCollection</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">$text</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$search</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ma requête&quot;</span><span class="p">}},{</span><span class="s2">&quot;score&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$meta</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;textScore&quot;</span><span class="p">}}).</span><span class="nx">sort</span><span class="p">({</span><span class="nx">score</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$meta</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;textScore&quot;</span><span class="p">}})</span>
</pre></div>
</div>
<p>Cette requête renvoie une liste des documents ordonnée par pertinence, si vous souhaitez juste afficher le score de chaque document, il suffit d’enlever <code class="docutils literal notranslate"><span class="pre">.sort({score:</span> <span class="pre">{$meta:</span> <span class="pre">&quot;textScore&quot;}})</span></code>.</p>
<p><em>Exemple 1 : Liste des documents comportant le terme “famille” mais pas le terme “politique”.</em></p>
<p><code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">discours</span></code></p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">discours</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="err">$</span><span class="n">text</span> <span class="p">:</span> <span class="p">{</span><span class="err">$</span><span class="n">search</span> <span class="p">:</span> <span class="s2">&quot;famille -politique&quot;</span><span class="p">}})</span>
</pre></div>
</div>
</div>
</div>
<p><em>Exemple 2 : Liste ordonnée par pertinence des documents par rapport au terme “écologie”</em> :</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">discours</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="err">$</span><span class="n">text</span><span class="p">:</span> <span class="p">{</span><span class="err">$</span><span class="n">search</span><span class="p">:</span> <span class="s2">&quot;écologie&quot;</span><span class="p">}},{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="p">{</span><span class="err">$</span><span class="n">meta</span><span class="p">:</span> <span class="s2">&quot;textScore&quot;</span><span class="p">}})</span><span class="o">.</span><span class="n">sort</span><span class="p">({</span><span class="n">score</span><span class="p">:</span> <span class="p">{</span><span class="err">$</span><span class="n">meta</span><span class="p">:</span> <span class="s2">&quot;textScore&quot;</span><span class="p">}})</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="index-geo-spatiaux">
<h2><span class="section-number">4.6. </span>Index géo-spatiaux<a class="headerlink" href="#index-geo-spatiaux" title="Link to this heading">#</a></h2>
<p>Avec des données géo-spatiales (longitude, latitude), il est possible de créer un index géo-spatial.
En plus d’une meilleure efficacité, cet index va permettre de trouver des éléments proches d’un point donné ou bien trouver des éléments inclus dans un polygone.</p>
<ul class="simple">
<li><p>Création d’un index</p></li>
</ul>
<p>Pour créer un index géo-spatial il faut lui donner le type “2dsphere” :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">coll</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span><span class="s2">&quot;att&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2dsphere&quot;</span><span class="p">})</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Requêtes avancées</p></li>
</ul>
<p>Pour obtenir les éléments les plus proches d’un point on définit d’abord une variable de type “Point” avec ses coordonnées.</p>
<p>Le mot-clé <code class="docutils literal notranslate"><span class="pre">$near</span></code> est nécessaire:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Point&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;coordinates&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">longitude</span><span class="p">,</span><span class="w"> </span><span class="nx">latitude</span><span class="p">]}</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">nomDeLaCollection</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="s2">&quot;clé&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$near</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$geometry</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">ref</span><span class="p">}}})</span>
</pre></div>
</div>
<p><em>Exemple 1 :</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">use</span> <span class="n">food</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">CrownHeights</span><span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">73.923</span><span class="p">,</span> <span class="mf">40.676</span><span class="p">]}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s2">&quot;address.loc&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="err">$</span><span class="n">near</span><span class="p">:</span> <span class="p">{</span><span class="err">$</span><span class="n">geometry</span><span class="p">:</span> <span class="n">CrownHeights</span><span class="p">}}})</span>
</pre></div>
</div>
</div>
</div>
<p>Si l’on veut trouver les éléments inclus dans un polygone la variable sera de type “Polygon” et aura plusieurs couples de coordonnées.
Pour avoir un polygone fermé, il faudra veiller à ce que les dernières coordonnées soient égales aux premières.</p>
<p>Le mot-clé <code class="docutils literal notranslate"><span class="pre">$within</span></code> remplace ici <code class="docutils literal notranslate"><span class="pre">$near</span></code> :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Polygon&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;coordinates&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[[[</span><span class="nx">long1</span><span class="p">,</span><span class="w"> </span><span class="nx">lat1</span><span class="p">],</span>
<span class="w">                                                 </span><span class="p">[</span><span class="nx">long2</span><span class="p">,</span><span class="w"> </span><span class="nx">lat2</span><span class="p">],</span>
<span class="w">                                                 </span><span class="p">[</span><span class="nx">long3</span><span class="p">,</span><span class="w"> </span><span class="nx">lat3</span><span class="p">],</span>
<span class="w">                                                 </span><span class="p">[</span><span class="nx">long4</span><span class="p">,</span><span class="w"> </span><span class="nx">lat4</span><span class="p">],</span>
<span class="w">                                                 </span><span class="p">[</span><span class="nx">long1</span><span class="p">,</span><span class="w"> </span><span class="nx">lat1</span><span class="p">]]]}</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">nomDeLaCollection</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="s2">&quot;clé&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$within</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$geometry</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">ref</span><span class="p">}}})</span><span class="w">                                                 </span>
</pre></div>
</div>
<p><em>Exemple 2 :</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">eastVillage</span><span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span> <span class="p">:</span> <span class="p">[[[</span><span class="o">-</span><span class="mf">73.9917900</span><span class="p">,</span> <span class="mf">40.7264100</span><span class="p">],</span>
                                                    <span class="p">[</span><span class="o">-</span><span class="mf">73.9917900</span><span class="p">,</span> <span class="mf">40.7321400</span><span class="p">],</span>
                                                    <span class="p">[</span><span class="o">-</span><span class="mf">73.9829300</span><span class="p">,</span> <span class="mf">40.7321400</span><span class="p">],</span>
                                                    <span class="p">[</span><span class="o">-</span><span class="mf">73.9829300</span><span class="p">,</span> <span class="mf">40.7264100</span><span class="p">],</span>
                                                    <span class="p">[</span><span class="o">-</span><span class="mf">73.9917900</span><span class="p">,</span> <span class="mf">40.7264100</span><span class="p">]]]}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">NYfood</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s2">&quot;address.loc&quot;</span><span class="p">:</span> <span class="p">{</span><span class="err">$</span><span class="n">within</span> <span class="p">:</span> <span class="p">{</span><span class="err">$</span><span class="n">geometry</span> <span class="p">:</span> <span class="n">eastVillage</span><span class="p">}}})</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="03_dates.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">3. </span>Attributs de type date</p>
      </div>
    </a>
    <a class="right-next"
       href="05_agreg.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">5. </span>Les requêtes d’agrégation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-quoi-servent-ils">4.1. À quoi servent-ils ?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quand-les-utiliser">4.2. Quand les utiliser ?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#syntaxe-adaptee">4.3. Syntaxe adaptée</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#index-composes">4.4. Index composés</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#requetes-et-index-textuels">4.5. Requêtes et Index textuels</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#index-geo-spatiaux">4.6. Index géo-spatiaux</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Unknown
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>